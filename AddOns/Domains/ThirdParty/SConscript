## ########################################
## $Id$


import os,platform,platform
from glob import glob

Import('LibInstallDir')

BuddyEnv = Environment()

if 'gcc' == BuddyEnv['CC']:
    BuddyEnv['CFLAGS']   = '-g -O2'
    BuddyEnv['CXXFLAGS'] = '-g -O2'
elif 'cl' == BuddyEnv['CC']:
    # Mostly copied from VS C++ 2005 Command line
    BuddyEnv['CXXFLAGS'] = '/TP /errorReport:prompt /Wp64 /W4 /GR /MTd /EHsc'
BuddyEnv['CPPPATH'] = [ 'src' ]


SRCS = glob('buddy-2.4/src/*.c') + ['buddy-2.4/src/cppext.cxx']
liba   = BuddyEnv.StaticLibrary('bdd' , SRCS)
iliba  = BuddyEnv.Install(LibInstallDir, liba)
hfiles = BuddyEnv.Install('include',glob('buddy-2.4/src/*.h'))

built = [iliba,hfiles]
Return('built')

