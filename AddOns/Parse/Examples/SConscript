## ##########################
## Build Example parser
import os,os.path

Import('WaliDir')
Import('LibInstallDir')
Import('BaseEnv')
Import('MkStatic')
Import('XercesDir')

XercesPath = os.path.join(WaliDir, 'AddOns', 'Parse', 'ThirdParty', XercesDir)

StaticLibs = []
Libs       = [ 'wali', 'waliparse', 'xerces-c', ] 
LibPath    = [ LibInstallDir, os.path.join(XercesPath,'lib'), ]

if MkStatic:
  StaticLibs = [
    os.path.join(LibInstallDir,'libwaliparse.a'),
    os.path.join(LibInstallDir,'libwali.a')
    ]
  Libs       = ['xerces-c']
  LibPath    = [ os.path.join(XercesPath,'lib') ]


## ###############################
## Environment
env = BaseEnv.Clone(
    CPPPATH  = [
      os.path.join(WaliDir, 'Source'),
      os.path.join(WaliDir, 'AddOns', 'Parse', 'Source'),
      os.path.join(XercesPath, 'include'),
    ],
    CXXFLAGS = '-g -ggdb -Wall -Wformat=2 -W ',
    LIBS     = Libs,
    LIBPATH  = LibPath
)

# Used to record the tests that are built
built = []

# Reach weight domain example
ReachFiles= Split("""
Reach/ExMain.cpp
Reach/Reach.cpp
""")
Reach = env.Program('ExMain',ReachFiles + StaticLibs)
built = Reach

Return('built')

